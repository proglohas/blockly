<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5JV8P57358"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5JV8P57358');
</script>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="shortcut icon" href="favicon.png">
<meta charset="utf-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>David's Blockly Lab</title>
<style>
/* æ¸…çˆ½æ·¡è—çš„èƒŒæ™¯ */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 30px;
    background-color: #F0F8FF; /* æ·¡è—è‰² (AliceBlue) */
    color: #333; /* é è¨­æ–‡å­—é¡è‰² */
    margin: 0;
}

h1 {
    margin-bottom: 20px;
    color: #007bff; /* æ¨™é¡Œé¡è‰² */
    border-bottom: 2px solid #007bff; /* æ¨™é¡Œä¸‹æ–¹åŠ å¼·åˆ†éš”ç·š */
    padding-bottom: 10px;
    text-align: right; 
    display: flex;
    justify-content: space-between; /* åœ¨å·¦å³å…©é‚Šæ”¾ç½®å…ƒç´  */
    align-items: flex-end; /* å°‡å…§å®¹æ”¾åœ¨åº•éƒ¨ï¼Œèˆ‡åˆ†éš”ç·šå°é½Š */
    flex-wrap: wrap; /* é¿å…åœ¨å°è¢å¹•ä¸Šæº¢å‡º */
}

/* ç¢ºä¿ä¸»è¦çš„ "é¡Œç›®åˆ—è¡¨" æ¨™é¡Œé å·¦ */
h1 span.title-main {
    text-align: left;
    flex-grow: 1; 
    color: #333; 
    font-size: 1.2em; 
}

/* è®“å³å´çš„è³‡è¨Šå¯ä»¥å‚ç›´æ’åˆ— */
h1 div.title-info {
    text-align: right;
    display: flex;
    flex-direction: column; 
    align-items: flex-end; 
}

/* proglohas@gmail.com çš„æ¨£å¼ */
h1 span.title-email {
    color: #555; 
    font-size: 0.7em; 
    margin-bottom: 5px; 
}

/* æ—­å…‰é«˜ä¸­ç·´ç¿’ç”¨çš„æ¨£å¼ */
h1 span.title-extra {
    color: #007bff; 
    font-size: 0.8em; 
    font-weight: normal; 
}

/* --- æ–°å¢ï¼šèªªæ˜å½±ç‰‡é€£çµå€å¡Šæ¨£å¼ --- */
#videoLinkBar {
    max-width: 100%;
    text-align: center;
    margin: -10px 0 25px 0; /* èª¿æ•´ä½ç½®ï¼Œè®“å®ƒç·Šæ¥åœ¨ h1 ä¹‹å¾Œ */
    padding: 10px;
    background-color: #e6f7ff; /* æ·ºè—è‰²èƒŒæ™¯ï¼Œè®“é€£çµé¡¯çœ¼ */
    border-radius: 6px;
    border: 1px solid #a3ccff;
}

#videoLinkBar a {
    color: #007bff;
    font-weight: bold;
    text-decoration: none;
    padding: 5px 10px;
    display: inline-block;
}

#videoLinkBar a:hover {
    color: #0056b3;
    text-decoration: underline;
    background-color: transparent; /* å–æ¶ˆæ‡¸åœæ™‚çš„èƒŒæ™¯è®Šè‰² */
}
/* --- èªªæ˜å½±ç‰‡é€£çµå€å¡Šæ¨£å¼çµæŸ --- */


/* --- åˆ†æ¬„ä½ˆå±€æ ¸å¿ƒæ¨£å¼ (Grid 2 æ¬„) --- */

#problemListContainer {
    display: grid;
    /* é è¨­å…©æ¬„ä½ˆå±€ï¼Œæ¯æ¬„å‡åˆ†ç©ºé–“ */
    grid-template-columns: repeat(2, 1fr); 
    /* è¨­ç½®æ¬„èˆ‡æ¬„ã€è¡Œèˆ‡è¡Œä¹‹é–“çš„é–“éš” */
    gap: 30px; 
}

/* éŸ¿æ‡‰å¼èª¿æ•´ (è®“å°è¢å¹•å›åˆ°å–®æ¬„) */
@media (max-width: 992px) {
    #problemListContainer {
        grid-template-columns: 1fr; /* å°è¢å¹•æ¢å¾©å–®æ¬„ */
        gap: 0;
    }
    /* æ¢å¾©å–®æ¬„æ™‚ï¼Œåœ¨æ¯å€‹åˆ†é¡ç¾¤çµ„ä¸‹æ–¹å¢åŠ é–“è·ï¼Œä½¿å…¶åˆ†é–‹ */
    .category-group {
        margin-bottom: 30px; 
    }
}

/* --- å…§éƒ¨å…ƒç´ æ¨£å¼ --- */

/* æ¨£å¼åŒ–æ–°å¢çš„åˆ†é¡æ¨™é¡Œ */
#problemListContainer h2 {
    color: #007bff; /* ä½¿ç”¨ä¸»é¡Œè‰² */
    border-bottom: 2px solid #a3ccff; /* æ·ºè—è‰²åˆ†éš”ç·š */
    padding-bottom: 5px;
    margin-top: 0; /* è²¼é½Š category-group é ‚éƒ¨ */
    margin-bottom: 10px; /* æ¨™é¡Œèˆ‡åˆ—è¡¨æ¡†æ¶ä¹‹é–“çš„é–“éš” */
    font-size: 1.5em;
    font-weight: 600;
    display: flex; /* è®“å…§å®¹åœ¨åŒä¸€è¡Œ */
    justify-content: space-between; /* æ¨™é¡Œå’Œé¡Œæ•¸çµ±è¨ˆåˆ†é–‹ */
    align-items: flex-end;
}

/* æ–°å¢çš„é¡Œæ•¸çµ±è¨ˆæ¨£å¼ */
#problemListContainer h2 span.count {
    font-size: 0.6em; /* è®“å­—é«”å°ä¸€é» */
    color: #555;
    font-weight: normal;
    padding-left: 10px;
    /* ç¢ºä¿ "é¡Œæ•¸çµ±è¨ˆ" å°é½Šåˆ†éš”ç·šåº•éƒ¨ */
    line-height: 1.5; 
}

/* åˆ—è¡¨æ¡†æ¶æ¨£å¼ (å·²åŠ å…¥å›ºå®šé«˜åº¦å’Œå‚ç›´æ²è»¸) */
.problem-list-frame {
    background-color: #ffffff;
    /* æ³¨æ„ï¼špadding æœƒè®“å¯¦éš›å¯è¦–å…§å®¹å€åŸŸè®Šå° */
    padding: 10px 20px; 
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    border: 1px solid #e0e0e0;
    
    /* === é—œéµï¼šå›ºå®šé«˜åº¦èˆ‡æ²è»¸ === */
    height: 450px; 
    overflow-y: auto; 
    /* ========================== */
}

/* é¡Œç›®é€£çµæ¨£å¼ (è¦†è“‹æ‰ #videoLinkBar a çš„æ¨£å¼ï¼Œç¢ºä¿é€™è£¡ç¶­æŒ block é¡¯ç¤º) */
.problem-list-frame a {
    display: block;
    padding: 10px 0;
    margin: 0;
    text-decoration: none;
    color: #333; 
    transition: background-color 0.3s ease;
    /* æ·¡æ·¡çš„åˆ†éš”ç·š */
    border-bottom: 1px solid #e0e0e0; 
}
/* ç§»é™¤æ¯å€‹æ¡†æ¶å…§æœ€å¾Œä¸€å€‹å…ƒç´ åº•éƒ¨çš„åˆ†éš”ç·š */
.problem-list-frame a:last-child {
    border-bottom: none;
}
.problem-list-frame a:hover {
    text-decoration: none;
    background-color: #e6f7ff; 
    color: #0056b3; 
}
</style>
</head>
<body>

<h1>
    <span class="title-main">é¡Œç›®åˆ—è¡¨</span>
    <div class="title-info">
        <span class="title-email">proglohas@gmail.com</span>
        <span class="title-extra">æ—­å…‰é«˜ä¸­ / è‰å±¯åœ‹ä¸­ Blockly ç·´ç¿’ç¶²ç«™</span>
    </div>
</h1>

<div id="videoLinkBar">
    ğŸ‘‰ 
    <a href="https://youtu.be/7F9qWODWyU4" target="_blank">é»æ­¤è§€çœ‹ç¶²ç«™ä½¿ç”¨èªªæ˜åŠ Blockly åŸºæœ¬æ“ä½œä»‹ç´¹å½±ç‰‡</a>
</div>
<div id="problemListContainer">
    
    <div class="category-group">
        <h2>åŸºç¤é¡Œåº« <span class="count" id="count_1">( é¡Œæ•¸çµ±è¨ˆ )</span></h2>
        <div id="problemList_1" class="problem-list-frame">Loading...</div>
    </div>
    
    <div class="category-group">
        <h2>ç«¶è³½é¡Œåº« <span class="count" id="count_2">( é¡Œæ•¸çµ±è¨ˆ )</span></h2>
        <div id="problemList_2" class="problem-list-frame">Loading...</div>
    </div>
    
    <div class="category-group">
        <h2>UVA é¡Œåº« <span class="count" id="count_3">( é¡Œæ•¸çµ±è¨ˆ )</span></h2>
        <div id="problemList_3" class="problem-list-frame">Loading...</div>
    </div>
    
    <div class="category-group">
        <h2>ä¸åˆ†é¡ / å…¶ä»– <span class="count" id="count_0">( é¡Œæ•¸çµ±è¨ˆ )</span></h2>
        <div id="problemList_0" class="problem-list-frame">Loading...</div>
    </div>

</div>

<script>
// å®šç¾©æ‰€æœ‰å¯èƒ½çš„åˆ†é¡ ID åŠå…¶å°æ‡‰çš„ HTML å®¹å™¨ ID
const categories = {
    '1': 'problemList_1', // åŸºç¤é¡Œåº«
    '2': 'problemList_2', // ç«¶è³½é¡Œåº«
    '3': 'problemList_3', // UVA é¡Œåº«
    '0': 'problemList_0', // ä¸åˆ†é¡ / å…¶ä»– (é è¨­)
};

// **æ–°å¢ï¼šé¡Œæ•¸çµ±è¨ˆå™¨**
const categoryCounts = {
    '1': 0,
    '2': 0,
    '3': 0,
    '0': 0,
};

// è™•ç†åˆå§‹åŒ–ç•«é¢ï¼Œæ¸…é™¤æ‰€æœ‰åˆ—è¡¨ä¸­çš„ "Loading..." æ–‡å­—
Object.values(categories).forEach(id => {
    const el = document.getElementById(id);
    if (el) el.innerHTML = '';
});

// ä½¿ç”¨ fetch è®€å– XML æª”æ¡ˆ
fetch(`problemset.xml?ts=${Date.now()}`, { cache: "no-store" })
  .then(resp => resp.text())
  .then(str => (new DOMParser()).parseFromString(str,"text/xml"))
  .then(xml => {
    const problems = xml.getElementsByTagName('problem');

    for(let i=0;i<problems.length;i++){
      const problem = problems[i];
      // è®€å– ID å’Œ NAME
      const id = problem.getElementsByTagName('id')[0].textContent;
      const name = problem.getElementsByTagName('name')[0].textContent;
      
      // è®€å– cato å€¼
      let catoNode = problem.getElementsByTagName('cato')[0];
      // å¦‚æœ cato å­˜åœ¨ï¼Œå–å…¶å…§å®¹ï¼Œå¦å‰‡é è¨­ç‚º '0'
      let cato = catoNode ? catoNode.textContent.trim() : '0';
      
      // å–å¾—å¯¦éš›çš„åˆ†é¡ ID (ç¢ºä¿ cato å­˜åœ¨æ–¼ categories)
      const actualCato = categories.hasOwnProperty(cato) ? cato : '0';

      // **æ–°å¢ï¼šç´¯è¨ˆé¡Œæ•¸**
      categoryCounts[actualCato]++;
      
      // æ ¹æ“š cato å–å¾—ç›®æ¨™å®¹å™¨ ID
      const targetListId = categories[actualCato]; 
      const listDiv = document.getElementById(targetListId);
      
      if (!listDiv) {
          console.error(`æ‰¾ä¸åˆ° ID ç‚º ${targetListId} çš„å®¹å™¨ï¼Œè«‹æª¢æŸ¥ HTML çµæ§‹ã€‚`);
          continue; 
      }
      
      const a = document.createElement('a');

      // ç”¢ç”Ÿ 5 ç¢¼äº‚æ•¸å­—ä¸²ï¼Œç”¨æ–¼é¿å…å¿«å–
      const rand = Math.random().toString(36).substring(2, 7);

      // è¨­ç½®é€£çµå±¬æ€§
      a.href = `train.html?id=${id}&v=${rand}`;
      a.target = "_blank";

      a.textContent = `${id} - ${name}`;
      listDiv.appendChild(a);
    }

    // **æ–°å¢ï¼šè¿´åœˆçµæŸå¾Œï¼Œæ›´æ–°é¡Œæ•¸çµ±è¨ˆé¡¯ç¤º**
    for (const cato in categoryCounts) {
        const countSpan = document.getElementById(`count_${cato}`);
        if (countSpan) {
            countSpan.textContent = `( ${categoryCounts[cato]} é¡Œ )`;
        }
    }
  })
  .catch(err => { 
    console.error(err); 
    // å¦‚æœè®€å–å¤±æ•—ï¼Œæ‰€æœ‰å®¹å™¨éƒ½é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    Object.values(categories).forEach(id => {
        const el = document.getElementById(id);
        if (el) el.textContent='è®€å– XML éŒ¯èª¤';
    });
    // åŒæ™‚æ›´æ–°æ‰€æœ‰è¨ˆæ•¸å™¨ç‚ºéŒ¯èª¤
    for (const cato in categoryCounts) {
        const countSpan = document.getElementById(`count_${cato}`);
        if (countSpan) {
            countSpan.textContent = `( è®€å–éŒ¯èª¤ )`;
        }
    }
});
</script>
</body>
</html>
